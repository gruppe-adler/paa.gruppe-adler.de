(()=>{"use strict";var t=function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function s(t){try{h(i.next(t))}catch(t){o(t)}}function a(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((i=i.apply(t,e||[])).next())}))};class e extends Error{constructor(){super('AFF not ready yet. Remember awaiting the "aff.ready" promise, before accessing any methods or properties.'),this.name="AFFNotReadyError"}}const r=new Map([[0,"OK"],[-1,"Unknown Error"],[-2,"Read Error"],[-3,"Argument Error"],[-4,"Invalid State"],[-5,"IO Error"],[-6,"Compression Error"],[-7,"Invalid State"]]);class i extends Error{constructor(t){var e;super(`${null!==(e=r.get(t))&&void 0!==e?e:"Unknown Error Code"} (Code: ${t})`),this.name="AFFExceptionError"}}class n{constructor(e,r){this.instance=null,this.memory=new WebAssembly.Memory({initial:256,maximum:32768}),this.dataView=new DataView(this.memory.buffer),this.ready=function(e,r){return t(this,void 0,void 0,(function*(){if(void 0!==WebAssembly.instantiateStreaming){const{instance:t}=yield WebAssembly.instantiateStreaming(e,r);return t}const t=(yield e).arrayBuffer();return WebAssembly.instantiate(t,r)}))}(e,{env:{memory:this.memory,__sys_stat64:(t,e)=>(this.setErrNo(5),-1),emscripten_notify_memory_growth:t=>this.updateViews()},wasi_snapshot_preview1:{fd_read:(t,e,r,i)=>(this.setErrNo(5),-1),fd_close:t=>(this.setErrNo(5),-1),fd_seek:(t,e,r,i,n)=>(this.setErrNo(5),-1),fd_write:(t,e,r,i)=>(this.setErrNo(5),-1),environ_sizes_get:(t,e)=>(this.dataView.setInt32(t,0,!0),this.dataView.setInt32(e,0,!0),0),environ_get:(t,e)=>0,proc_exit:t=>{var e;null===(e=null==r?void 0:r.exit)||void 0===e||e.call(r,t)}}}).then((t=>{this.instance=t,this.updateViews()}))}get exports(){var t;return null===(t=this.instance)||void 0===t?void 0:t.exports}updateViews(){this.dataView=new DataView(this.memory.buffer)}malloc(t){if(null===this.exports)throw new e;const r=this.exports.malloc(t);if(0===r)throw new Error("Failed to allocate memory");return r}free(t){if(null===this.exports)throw new e;this.exports.free(t)}writeBufferToMemory(t){const e=this.malloc(t.byteLength),r=new Uint8Array(t);for(let t=0;t<r.length;t++)this.dataView.setUint8(e+t,r[t]);return e}getBytesFromMemory(t,e){return new Uint8Array(this.memory.buffer).slice(t,t+e)}setErrNo(t){if(null===this.exports)throw new e;this.dataView.setInt32(this.exports.__errno_location(),t)}getLastAFFException(){if(null===this.exports)throw new e;const t=this.exports.get_last_aff_exception();return new i(t)}encode(t){if(null===this.exports)throw new e;const r=this.malloc(4),i=this.writeBufferToMemory(t.data.buffer),n=this.exports.encode(t.width,t.height,i,r);if(0===n)throw this.getLastAFFException();const o=this.dataView.getUint32(r,!0),s=this.getBytesFromMemory(n,o);if(0===this.exports.free_encoded_data(n))throw this.getLastAFFException();return this.free(r),this.free(i),s}decode(t){if(null===this.exports)throw new e;const r=this.malloc(4),i=this.malloc(2),n=this.malloc(2),o=this.writeBufferToMemory(t.buffer),s=this.exports.decode(o,t.length,i,n,r);if(0===s)throw this.getLastAFFException();const a=this.dataView.getUint32(r,!0),h=this.dataView.getUint16(i,!0),c=this.dataView.getUint16(n,!0),f=this.getBytesFromMemory(s,a),d=new ImageData(new Uint8ClampedArray(f.buffer),h,c);return this.free(r),this.free(i),this.free(n),this.free(o),d}}var o=function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function s(t){try{h(i.next(t))}catch(t){o(t)}}function a(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((i=i.apply(t,e||[])).next())}))};function s(e){return o(this,void 0,void 0,(function*(){const r=(yield function(e="/grad_aff_paa.wasm",r){return t(this,void 0,void 0,(function*(){("string"==typeof e||e instanceof Request||e instanceof URL)&&(e instanceof URL&&(e=e.toString()),e=fetch(e));const t=new n(e,r);return yield t.ready,t}))}()).encode(e);return new Blob([r.buffer],{type:"image/vnd.paa"})}))}addEventListener("message",(t=>o(void 0,void 0,void 0,(function*(){const e=t.data;let r;try{r={type:"data",data:yield s(e)}}catch(t){r={type:"error",data:t}}postMessage(r,this)}))))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYWEuZ3J1cHBlLWFkbGVyLmRlLy4vc3JjL3V0aWxzL2FmZi50cyIsIndlYnBhY2s6Ly9wYWEuZ3J1cHBlLWFkbGVyLmRlLy4vc3JjL3dvcmtlci90b1BBQS53b3JrZXIudHMiLCJ3ZWJwYWNrOi8vcGFhLmdydXBwZS1hZGxlci5kZS8uL3NyYy91dGlscy9maWxlLnRzIl0sIm5hbWVzIjpbIkFGRk5vdFJlYWR5RXJyb3IiLCJFcnJvciIsInN1cGVyIiwibmFtZSIsIkFGRl9FWENFUFRJT05fTVNHUyIsIk1hcCIsIkFGRkV4Y2VwdGlvbkVycm9yIiwiY29kZSIsImdldCIsInRoaXMiLCJBRkYiLCJpbnB1dCIsIm9wdGlvbnMiLCJpbnN0YW5jZSIsIm1lbW9yeSIsIldlYkFzc2VtYmx5IiwiTWVtb3J5IiwiaW5pdGlhbCIsIm1heGltdW0iLCJkYXRhVmlldyIsIkRhdGFWaWV3IiwiYnVmZmVyIiwicmVhZHkiLCJyZXNwb25zZSIsImltcG9ydE9iamVjdCIsInVuZGVmaW5lZCIsImluc3RhbnRpYXRlU3RyZWFtaW5nIiwiYnl0ZXMiLCJhcnJheUJ1ZmZlciIsImluc3RhbnRpYXRlIiwiaW5zdGFudGlhdGVXQSIsImVudiIsIl9fc3lzX3N0YXQ2NCIsInBhdGhQdHIiLCJidWZmZXJQdHIiLCJzZXRFcnJObyIsImVtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgiLCJpbmRleCIsInVwZGF0ZVZpZXdzIiwid2FzaV9zbmFwc2hvdF9wcmV2aWV3MSIsImZkX3JlYWQiLCJmZCIsImlvdiIsImlvdkNvdW50IiwicG51bSIsImZkX2Nsb3NlIiwiZmRfc2VlayIsIm9mZnNldExvdyIsIm9mZnNldEhpZ2giLCJ3aGVuY2UiLCJuZXdPZmZzZXQiLCJmZF93cml0ZSIsImVudmlyb25fc2l6ZXNfZ2V0IiwicGVudmlyb25Db3VudFB0ciIsInBlbnZpcm9uQnVmZmVyU2l6ZVB0ciIsInNldEludDMyIiwiZW52aXJvbl9nZXQiLCJlbnZpcm9uIiwiZW52aXJvbkJ1ZmZlclB0ciIsInByb2NfZXhpdCIsImV4aXRDb2RlIiwiZXhpdCIsInRoZW4iLCJleHBvcnRzIiwic2l6ZSIsInB0ciIsIm1hbGxvYyIsImZyZWUiLCJieXRlTGVuZ3RoIiwiYXJyIiwiVWludDhBcnJheSIsImkiLCJsZW5ndGgiLCJzZXRVaW50OCIsInNsaWNlIiwiZXJybm8iLCJfX2Vycm5vX2xvY2F0aW9uIiwibnVtIiwiZ2V0X2xhc3RfYWZmX2V4Y2VwdGlvbiIsImltYWdlRGF0YSIsInNpemVQdHIiLCJpbWFnZURhdGFQdHIiLCJ3cml0ZUJ1ZmZlclRvTWVtb3J5IiwiZGF0YSIsImVuY29kZSIsIndpZHRoIiwiaGVpZ2h0IiwiZ2V0TGFzdEFGRkV4Y2VwdGlvbiIsImdldFVpbnQzMiIsIm91dHB1dCIsImdldEJ5dGVzRnJvbU1lbW9yeSIsImZyZWVfZW5jb2RlZF9kYXRhIiwib3V0cHV0U2l6ZVB0ciIsIndpZHRoUHRyIiwiaGVpZ2h0UHRyIiwiZGF0YVB0ciIsImRlY29kZSIsImdldFVpbnQxNiIsImltYWdlIiwiSW1hZ2VEYXRhIiwiVWludDhDbGFtcGVkQXJyYXkiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwiYXBwbHkiLCJjb252ZXJ0SW1hZ2VUb1BhYSIsInVpbnQ4YXJyYXkiLCJSZXF1ZXN0IiwiVVJMIiwidG9TdHJpbmciLCJmZXRjaCIsImluaXRPYmoiLCJpbml0IiwiQmxvYiIsInR5cGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJpbWFnZURhdGUiLCJtc2ciLCJlcnIiLCJwb3N0TWVzc2FnZSJdLCJtYXBwaW5ncyI6IjZUQWlCTyxNQUFNQSxVQUF5QkMsTUFHbEMsY0FDSUMsTUFBTSw2R0FITSxLQUFBQyxLQUFPLG9CQU8zQixNQUFNQyxFQUFxQixJQUFJQyxJQUFv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N0csYUFBaUI2RyxNQUFLN0csRUFBUUEsRUFBTThHLFlBRXhDOUcsRUFBUStHLE1BQU0vRyxJQUdsQixNQUFNZ0gsRUFBVSxJQUFJakgsRUFBSUMsRUFBT0MsR0FHL0IsYUFGTStHLEVBQVFyRyxNQUVQcUcsS0N2VWVDLElBQ0t4QyxPQUFPRCxHQUM5QixPQUFPLElBQUkwQyxLQUFLLENBQUNQLEVBQVdqRyxRQUFTLENBQUV5RyxLQ1hsQixxQkRjN0JDLGlCQUFpQixXQUFZQyxHQUFVLE9BQVUsT0FBUSxPQUFRLEdBQVEsWUFDckUsTUFBTUMsRUFBWUQsRUFBTTdDLEtBQ3hCLElBQUkrQyxFQUNKLElBRUlBLEVBQU0sQ0FBRUosS0FBTSxPQUFRM0MsV0FESGtDLEVBQWtCWSxJQUd6QyxNQUFPRSxHQUNIRCxFQUFNLENBQUVKLEtBQU0sUUFBUzNDLEtBQU1nRCxHQUdqQ0MsWUFBWUYsRUFBS3pILFkiLCJmaWxlIjoiOTM5LjIyNGM3NTc3Lndvcmtlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzICovXG5jb25zdCBOVUxMX1BPSU5URVIgPSAwO1xuXG5pbnRlcmZhY2UgQUZGRXhwb3J0cyBleHRlbmRzIFdlYkFzc2VtYmx5LkV4cG9ydHMge1xuICAgIGVuY29kZTogKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBkYXRhOiBudW1iZXIsIHNpemU6IG51bWJlcikgPT4gbnVtYmVyO1xuICAgIGZyZWVfZW5jb2RlZF9kYXRhOiAocHRyOiBudW1iZXIpID0+IDB8MTtcbiAgICBkZWNvZGU6IChkYXRhOiBudW1iZXIsIGRhdGFTaXplOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBzaXplOiBudW1iZXIpID0+IG51bWJlcjtcbiAgICBnZXRfbGFzdF9hZmZfZXhjZXB0aW9uOiAoKSA9PiBudW1iZXI7XG4gICAgZnJlZTogKHB0cjogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgbWFsbG9jOiAoc2l6ZTogbnVtYmVyKSA9PiBudW1iZXI7XG4gICAgX19lcnJub19sb2NhdGlvbjogKCkgPT4gbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgQUZGT3B0aW9ucyB7XG4gICAgZXhpdD86IChleGl0Q29kZTogbnVtYmVyKSA9PiB1bmtub3duO1xufVxuXG5leHBvcnQgY2xhc3MgQUZGTm90UmVhZHlFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICdBRkZOb3RSZWFkeUVycm9yJztcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignQUZGIG5vdCByZWFkeSB5ZXQuIFJlbWVtYmVyIGF3YWl0aW5nIHRoZSBcImFmZi5yZWFkeVwiIHByb21pc2UsIGJlZm9yZSBhY2Nlc3NpbmcgYW55IG1ldGhvZHMgb3IgcHJvcGVydGllcy4nKTtcbiAgICB9XG59XG5cbmNvbnN0IEFGRl9FWENFUFRJT05fTVNHUyA9IG5ldyBNYXA8bnVtYmVyLCBzdHJpbmc+KFtcbiAgICBbMCwgJ09LJ10sXG4gICAgWy0xLCAnVW5rbm93biBFcnJvciddLFxuICAgIFstMiwgJ1JlYWQgRXJyb3InXSxcbiAgICBbLTMsICdBcmd1bWVudCBFcnJvciddLFxuICAgIFstNCwgJ0ludmFsaWQgU3RhdGUnXSxcbiAgICBbLTUsICdJTyBFcnJvciddLFxuICAgIFstNiwgJ0NvbXByZXNzaW9uIEVycm9yJ10sXG4gICAgWy03LCAnSW52YWxpZCBTdGF0ZSddXG5dKTtcblxuZXhwb3J0IGNsYXNzIEFGRkV4Y2VwdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvZGU6IG51bWJlcikge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gQUZGX0VYQ0VQVElPTl9NU0dTLmdldChjb2RlKSA/PyAnVW5rbm93biBFcnJvciBDb2RlJztcblxuICAgICAgICBzdXBlcihgJHttZXNzYWdlfSAoQ29kZTogJHtjb2RlfSlgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnQUZGRXhjZXB0aW9uRXJyb3InO1xuICAgIH1cbn1cblxuLy8gU2FmYXJpIHN0aWxsIGNhbid0IGhhbmRsZSBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZy4uLlxuYXN5bmMgZnVuY3Rpb24gaW5zdGFudGlhdGVXQShyZXNwb25zZTogUmVzcG9uc2UgfCBQcm9taXNlTGlrZTxSZXNwb25zZT4sIGltcG9ydE9iamVjdD86IFdlYkFzc2VtYmx5LkltcG9ydHMpOiBQcm9taXNlPFdlYkFzc2VtYmx5Lkluc3RhbmNlPiB7XG4gICAgaWYgKFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgeyBpbnN0YW5jZSB9ID0gYXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcocmVzcG9uc2UsIGltcG9ydE9iamVjdCk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG5cbiAgICBjb25zdCBieXRlcyA9IChhd2FpdCByZXNwb25zZSkuYXJyYXlCdWZmZXIoKTtcbiAgICByZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYnl0ZXMsIGltcG9ydE9iamVjdCk7XG59XG5cbmV4cG9ydCBjbGFzcyBBRkYge1xuICAgIHByaXZhdGUgZGF0YVZpZXc6IERhdGFWaWV3O1xuICAgIHByaXZhdGUgaW5zdGFuY2U6IFdlYkFzc2VtYmx5Lkluc3RhbmNlfG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgbWVtb3J5OiBXZWJBc3NlbWJseS5NZW1vcnk7XG4gICAgcHVibGljIHJlYWRvbmx5IHJlYWR5OiBQcm9taXNlPHZvaWQ+O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSZXNwb25zZXxQcm9taXNlTGlrZTxSZXNwb25zZT59IGlucHV0IChQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8pIFJlc3BvbnNlLCB3aGljaCBpbmNsdWRlcyBXQVNNIE1vZHVsZVxuICAgICAqIEBwYXJhbSB7QUZGT3B0aW9uc30gb3B0aW9ucyBPcHRpb25zXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaW5wdXQ6IFJlc3BvbnNlfFByb21pc2VMaWtlPFJlc3BvbnNlPiwgb3B0aW9ucz86IEFGRk9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5tZW1vcnkgPSBuZXcgV2ViQXNzZW1ibHkuTWVtb3J5KHsgaW5pdGlhbDogMjU2LCBtYXhpbXVtOiAzMjc2OCB9KTtcbiAgICAgICAgdGhpcy5kYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLm1lbW9yeS5idWZmZXIpO1xuXG4gICAgICAgIHRoaXMucmVhZHkgPSBpbnN0YW50aWF0ZVdBKFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZW52OiB7XG4gICAgICAgICAgICAgICAgICAgIG1lbW9yeTogdGhpcy5tZW1vcnksXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBHZXQgaW5mb3JtYXRpb24gYWJvdXQgYSBmaWxlIG9yIGRpcmVjdG9yeSwgZ2l2ZW4gYSBwYXRoXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwYXRoUHRyIFRoZSBwYXRoIG9mIHRoZSBmaWxlIG9yIGRpcmVjdG9yeSB0aGF0IHlvdSB3YW50IGluZm9ybWF0aW9uIGFib3V0LiAoY2hhciAqKVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYnVmZmVyUHRyIEEgcG9pbnRlciB0byBhIGJ1ZmZlciB3aGVyZSB0aGUgZnVuY3Rpb24gY2FuIHN0b3JlIHRoZSBpbmZvcm1hdGlvbiAoc3RydWN0IHN0YXQ2NCAqKVxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7MHwtMX0gMCA9IFN1Y2Nlc3MgLyAtMSA9IEFuIGVycm9yIG9jY3VycmVkIChlcnJubyBpcyBzZXQpLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgX19zeXNfc3RhdDY0OiAocGF0aFB0cjogbnVtYmVyLCBidWZmZXJQdHI6IG51bWJlcik6IDB8LTEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFcnJObyg1KTsgLy8gRUlPOiBJbnB1dC9vdXRwdXQgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ2FsbGVkIHdoZW4gbWVtb3J5IGhhcyBncm93bi4gSW4gYSBKUyBydW50aW1lLCB0aGlzIGlzIHVzZWQgdG8ga25vdyB3aGVuIHRvIHVwZGF0ZSB0aGUgSlMgdmlld3NcbiAgICAgICAgICAgICAgICAgICAgICogb24gdGhlIHdhc20gbWVtb3J5LCB3aGljaCBvdGhlcndpc2Ugd2Ugd291bGQgbmVlZCB0byBjb25zdGFudGx5IGNoZWNrIGZvciBhZnRlciBhbnkgd2FzbSBjb2RlXG4gICAgICAgICAgICAgICAgICAgICAqIHJ1bnMuIFNlZSBbdGhpcyB3YXNpIGRpc2N1c3Npb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9XZWJBc3NlbWJseS9XQVNJL2lzc3Vlcy84MikuXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBXaGljaCBtZW1vcnkgaGFzIGdyb3duXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBlbXNjcmlwdGVuX25vdGlmeV9tZW1vcnlfZ3Jvd3RoOiAoaW5kZXg6IG51bWJlcikgPT4gdGhpcy51cGRhdGVWaWV3cygpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3YXNpX3NuYXBzaG90X3ByZXZpZXcxOiB7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBSZWFkIGZyb20gYSBmaWxlIGRlc2NyaXB0b3JcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGZkIEZpbGUgZGVzY3JpcHRvclxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaW92XG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpb3ZjbnRcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBudW1cbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMgezB8LTF9IDAgPSBTdWNjZXNzIC8gLTEgPSBBbiBlcnJvciBvY2N1cnJlZCAoZXJybm8gaXMgc2V0KS5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGZkX3JlYWQ6IChmZDogbnVtYmVyLCBpb3Y6IG51bWJlciwgaW92Q291bnQ6IG51bWJlciwgcG51bTogbnVtYmVyKTogMHwtMSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEVyck5vKDUpOyAvLyBFSU86IElucHV0L291dHB1dCBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBMb3NlIGEgZmlsZSBkZXNjcmlwdG9yXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmZCBGaWxlIGRlc2NyaXB0b3JcbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMgezB8LTF9IDAgPSBTdWNjZXNzIC8gLTEgPSBBbiBlcnJvciBvY2N1cnJlZCAoZXJybm8gaXMgc2V0KS5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGZkX2Nsb3NlOiAoZmQ6IG51bWJlcik6IDB8LTEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFcnJObyg1KTsgLy8gRUlPOiBJbnB1dC9vdXRwdXQgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogUmVwb3NpdGlvbiByZWFkL3dyaXRlIGZpbGUgb2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmZCBGaWxlIGRlc2NyaXB0b3JcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldExvd1xuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0SGlnaFxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gd2hlbmNlXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdPZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMgezB8LTF9IDAgPSBTdWNjZXNzIC8gLTEgPSBBbiBlcnJvciBvY2N1cnJlZCAoZXJybm8gaXMgc2V0KS5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGZkX3NlZWs6IChmZDogbnVtYmVyLCBvZmZzZXRMb3c6IG51bWJlciwgb2Zmc2V0SGlnaDogbnVtYmVyLCB3aGVuY2U6IG51bWJlciwgbmV3T2Zmc2V0OiBudW1iZXIpOiAwfC0xID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RXJyTm8oNSk7IC8vIEVJTzogSW5wdXQvb3V0cHV0IGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFdyaXRlIHRvIGEgZmlsZSBkZXNjcmlwdG9yXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmZCBGaWxlIGRlc2NyaXB0b3JcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGlvdlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaW92Q291bnRcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBudW1cbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMgezB8LTF9IDAgPSBTdWNjZXNzIC8gLTEgPSBBbiBlcnJvciBvY2N1cnJlZCAoZXJybm8gaXMgc2V0KS5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGZkX3dyaXRlOiAoZmQ6IG51bWJlciwgaW92OiBudW1iZXIsIGlvdkNvdW50OiBudW1iZXIsIHBudW06IG51bWJlcik6IDB8LTEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFcnJObyg1KTsgLy8gRUlPOiBJbnB1dC9vdXRwdXQgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogUmV0dXJuIGNvbW1hbmQtbGluZSBhcmd1bWVudCBkYXRhIHNpemVzLlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcGVudmlyb25Db3VudCAoT3V0cHV0IHBvaW50ZXIpIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcGVudmlyb25CdWZmZXJTaXplIChPdXRwdXQgcG9pbnRlcikgVGhlIHNpemUgb2YgdGhlIGFyZ3VtZW50IHN0cmluZyBkYXRhLlxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7MH1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGVudmlyb25fc2l6ZXNfZ2V0OiAocGVudmlyb25Db3VudFB0cjogbnVtYmVyLCBwZW52aXJvbkJ1ZmZlclNpemVQdHI6IG51bWJlcik6IDB8LTEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhVmlldy5zZXRJbnQzMihwZW52aXJvbkNvdW50UHRyLCAwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVZpZXcuc2V0SW50MzIocGVudmlyb25CdWZmZXJTaXplUHRyLCAwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlbnZpcm9uX2dldDogKGVudmlyb246IG51bWJlciwgZW52aXJvbkJ1ZmZlclB0cjogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ2FsbGVkIG9uIHByb2dyYW0gZXhpdFxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gZXhpdENvZGUgRXhpdCBjb2RlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBwcm9jX2V4aXQ6IChleGl0Q29kZTogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zPy5leGl0Py4oZXhpdENvZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApLnRoZW4oaW5zdGFuY2UgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBleHBvcnRzKCk6IEFGRkV4cG9ydHN8bnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlPy5leHBvcnRzIGFzIEFGRkV4cG9ydHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoaXMuZGF0YVZpZXcuIFRoaXMgaXMgY2FsbGVkIG9uY2UgaW5pdGlhbGx5LCB3aGVuIHRoZSBXQVNNIGxvYWRzXG4gICAgICogYW5kIGV2ZXJ5IHRpbWUgbWVtb3J5IGdyb3dzIC8gc2hyaW5rcyBhbmQgdGhlcmVmb3JlIHRoZSB1bmRlcmx5aW5nIG1lbW9yeVxuICAgICAqIGJ1ZmZlciBjaGFuZ2VzLlxuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlVmlld3MoKSB7XG4gICAgICAgIHRoaXMuZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSBtZW1vcnkgYmxvY2tcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBTaXplIG9mIHRoZSBtZW1vcnkgYmxvY2ssIGluIGJ5dGVzLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIHBvaW50ZXIgdG8gdGhlIGFsbG9jYXRlZCBtZW1vcnkuXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYWxsb2Moc2l6ZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwb3J0cyA9PT0gbnVsbCkgdGhyb3cgbmV3IEFGRk5vdFJlYWR5RXJyb3IoKTtcblxuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLmV4cG9ydHMubWFsbG9jKHNpemUpO1xuICAgICAgICBpZiAocHRyID09PSBOVUxMX1BPSU5URVIpIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGFsbG9jYXRlIG1lbW9yeScpO1xuXG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVhbGxvY2F0ZSBtZW1vcnkgcHJldmlvdXNseSBhbGxvY2F0ZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHRyIFRoaXMgaXMgdGhlIHBvaW50ZXIgdG8gYSBtZW1vcnkgYmxvY2sgcHJldmlvdXNseSBhbGxvY2F0ZWRcbiAgICAgKi9cbiAgICBwcml2YXRlIGZyZWUocHRyOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwb3J0cyA9PT0gbnVsbCkgdGhyb3cgbmV3IEFGRk5vdFJlYWR5RXJyb3IoKTtcblxuICAgICAgICB0aGlzLmV4cG9ydHMuZnJlZShwdHIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdyaXRlIGJ1ZmZlciB0byBtZW1vcnkuIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IGFsbG9jYXRlIG1lbW9yeS5cbiAgICAgKiBZb3Ugc2hvdWxkIHJlbWVtYmVyIHRvIGZyZWUgdGhlIG1lbW9yeSBhZnRlciB5b3UncmUgZG9uZSB1c2luZyBpdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyTGlrZX0gYnVmZmVyXG4gICAgICogQHJldHVybnMge251bWJlcn0gUG9pbnRlciB0byB0aGUgYWxsb2NhdGVkIG1lbW9yeS5cbiAgICAgKi9cbiAgICBwcml2YXRlIHdyaXRlQnVmZmVyVG9NZW1vcnkoYnVmZmVyOiBBcnJheUJ1ZmZlckxpa2UpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLm1hbGxvYyhidWZmZXIuYnl0ZUxlbmd0aCk7XG5cbiAgICAgICAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5kYXRhVmlldy5zZXRVaW50OChwdHIgKyBpLCBhcnJbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGZyb20gbWVtb3J5XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHB0ciBQb2ludGVyIHRvIGRhdGFcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBTaXplXG4gICAgICogQHJldHVybnMge1VpbnQ4QXJyYXl9XG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRCeXRlc0Zyb21NZW1vcnkocHRyOiBudW1iZXIsIHNpemU6IG51bWJlcik6IFVpbnQ4QXJyYXkge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodGhpcy5tZW1vcnkuYnVmZmVyKS5zbGljZShwdHIsIHB0ciArIHNpemUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBlcnJub1xuICAgICAqIEBwYXJhbSBlcnJubyBlcnJub1xuICAgICAqL1xuICAgIHByaXZhdGUgc2V0RXJyTm8oZXJybm86IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5leHBvcnRzID09PSBudWxsKSB0aHJvdyBuZXcgQUZGTm90UmVhZHlFcnJvcigpO1xuXG4gICAgICAgIHRoaXMuZGF0YVZpZXcuc2V0SW50MzIodGhpcy5leHBvcnRzLl9fZXJybm9fbG9jYXRpb24oKSwgZXJybm8pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBlcnJvciwgd2hpY2ggY29ycmVzcG9uZHMgdG8gbGFzdCB0aHJvd24gZ3JhZF9hZmYgZXhjZXB0aW9uXG4gICAgICogQHJldHVybnMgRXJyb3IgYWNjb3JkaW5nIHRvIGxhc3QgZXhjZXB0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRMYXN0QUZGRXhjZXB0aW9uKCk6IEFGRkV4Y2VwdGlvbkVycm9yIHtcbiAgICAgICAgaWYgKHRoaXMuZXhwb3J0cyA9PT0gbnVsbCkgdGhyb3cgbmV3IEFGRk5vdFJlYWR5RXJyb3IoKTtcblxuICAgICAgICBjb25zdCBudW0gPSB0aGlzLmV4cG9ydHMuZ2V0X2xhc3RfYWZmX2V4Y2VwdGlvbigpO1xuXG4gICAgICAgIHJldHVybiBuZXcgQUZGRXhjZXB0aW9uRXJyb3IobnVtKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGUgaW1hZ2UgZGF0YSB0byBQQUEgYnl0ZXNcbiAgICAgKiBAcGFyYW0ge0ltYWdlRGF0YX0gaW1hZ2VEYXRhIEltYWdlIGRhdGFcbiAgICAgKiBAcmV0dXJucyB7VWludDhBcnJheX0gYnl0ZS1lbmNvZGVkIFBBQVxuICAgICAqXG4gICAgICogQHRocm93cyB7QGxpbmsgQUZGTm90UmVhZHlFcnJvcn1cbiAgICAgKiBUaHJvd24gaWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYmVmb3JlIEFGRiBpbnN0YW5jZSBpcyByZWFkeS4gKGF3YWl0IHRoZSAucmVhZHkgcHJvbWlzZSB0byBwcmV2ZW50IHRoaXMpXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIHtAbGluayBBRkZFeGNlcHRpb25FcnJvcn1cbiAgICAgKiBUaHJvd24gaWYgZ3JhZF9hZmYgaW1wbGVtZW50YXRpb24gdGhyb3dzIGFueSBleGNlcHRpb25zLlxuICAgICAqL1xuICAgIHB1YmxpYyBlbmNvZGUoaW1hZ2VEYXRhOiBJbWFnZURhdGEpOiBVaW50OEFycmF5IHtcbiAgICAgICAgaWYgKHRoaXMuZXhwb3J0cyA9PT0gbnVsbCkgdGhyb3cgbmV3IEFGRk5vdFJlYWR5RXJyb3IoKTtcblxuICAgICAgICBjb25zdCBzaXplUHRyID0gdGhpcy5tYWxsb2MoNCk7XG4gICAgICAgIGNvbnN0IGltYWdlRGF0YVB0ciA9IHRoaXMud3JpdGVCdWZmZXJUb01lbW9yeShpbWFnZURhdGEuZGF0YS5idWZmZXIpO1xuXG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMuZXhwb3J0cy5lbmNvZGUoaW1hZ2VEYXRhLndpZHRoLCBpbWFnZURhdGEuaGVpZ2h0LCBpbWFnZURhdGFQdHIsIHNpemVQdHIpO1xuICAgICAgICBpZiAocHRyID09PSBOVUxMX1BPSU5URVIpIHRocm93IHRoaXMuZ2V0TGFzdEFGRkV4Y2VwdGlvbigpO1xuXG4gICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLmRhdGFWaWV3LmdldFVpbnQzMihzaXplUHRyLCB0cnVlKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gdGhpcy5nZXRCeXRlc0Zyb21NZW1vcnkocHRyLCBzaXplKTtcblxuICAgICAgICBjb25zdCBzdWNjZXNzID0gdGhpcy5leHBvcnRzLmZyZWVfZW5jb2RlZF9kYXRhKHB0cik7XG4gICAgICAgIGlmIChzdWNjZXNzID09PSAwKSB0aHJvdyB0aGlzLmdldExhc3RBRkZFeGNlcHRpb24oKTtcbiAgICAgICAgdGhpcy5mcmVlKHNpemVQdHIpO1xuICAgICAgICB0aGlzLmZyZWUoaW1hZ2VEYXRhUHRyKTtcblxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuY29kZSBQQUEgYnl0ZXMgdG8gaW1hZ2UgZGF0YVxuICAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gZGF0YSBieXRlLWVuY29kZWQgUEFBXG4gICAgICogQHJldHVybnMge0ltYWdlRGF0YX0gaW1hZ2UgZGF0YVxuICAgICAqXG4gICAgICogQHRocm93cyB7QGxpbmsgQUZGTm90UmVhZHlFcnJvcn1cbiAgICAgKiBUaHJvd24gaWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYmVmb3JlIEFGRiBpbnN0YW5jZSBpcyByZWFkeS4gKGF3YWl0IHRoZSAucmVhZHkgcHJvbWlzZSB0byBwcmV2ZW50IHRoaXMpXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIHtAbGluayBBRkZFeGNlcHRpb25FcnJvcn1cbiAgICAgKiBUaHJvd24gaWYgZ3JhZF9hZmYgaW1wbGVtZW50YXRpb24gdGhyb3dzIGFueSBleGNlcHRpb25zLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZWNvZGUoZGF0YTogVWludDhBcnJheSk6IEltYWdlRGF0YSB7XG4gICAgICAgIGlmICh0aGlzLmV4cG9ydHMgPT09IG51bGwpIHRocm93IG5ldyBBRkZOb3RSZWFkeUVycm9yKCk7XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0U2l6ZVB0ciA9IHRoaXMubWFsbG9jKDQpO1xuICAgICAgICBjb25zdCB3aWR0aFB0ciA9IHRoaXMubWFsbG9jKDIpO1xuICAgICAgICBjb25zdCBoZWlnaHRQdHIgPSB0aGlzLm1hbGxvYygyKTtcbiAgICAgICAgY29uc3QgZGF0YVB0ciA9IHRoaXMud3JpdGVCdWZmZXJUb01lbW9yeShkYXRhLmJ1ZmZlcik7XG5cbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5leHBvcnRzLmRlY29kZShkYXRhUHRyLCBkYXRhLmxlbmd0aCwgd2lkdGhQdHIsIGhlaWdodFB0ciwgb3V0cHV0U2l6ZVB0cik7XG4gICAgICAgIGlmIChwdHIgPT09IE5VTExfUE9JTlRFUikgdGhyb3cgdGhpcy5nZXRMYXN0QUZGRXhjZXB0aW9uKCk7XG5cbiAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuZGF0YVZpZXcuZ2V0VWludDMyKG91dHB1dFNpemVQdHIsIHRydWUpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuZGF0YVZpZXcuZ2V0VWludDE2KHdpZHRoUHRyLCB0cnVlKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5kYXRhVmlldy5nZXRVaW50MTYoaGVpZ2h0UHRyLCB0cnVlKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gdGhpcy5nZXRCeXRlc0Zyb21NZW1vcnkocHRyLCBzaXplKTtcblxuICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZURhdGEobmV3IFVpbnQ4Q2xhbXBlZEFycmF5KG91dHB1dC5idWZmZXIpLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICB0aGlzLmZyZWUob3V0cHV0U2l6ZVB0cik7XG4gICAgICAgIHRoaXMuZnJlZSh3aWR0aFB0cik7XG4gICAgICAgIHRoaXMuZnJlZShoZWlnaHRQdHIpO1xuICAgICAgICB0aGlzLmZyZWUoZGF0YVB0cik7XG5cbiAgICAgICAgcmV0dXJuIGltYWdlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge1JlcXVlc3R8UmVxdWVzdEluZm98VVJMfFJlc3BvbnNlfFByb21pc2U8UmVzcG9uc2U+fSBpbnB1dFxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBpbml0KGlucHV0OiBSZXF1ZXN0fFJlcXVlc3RJbmZvfFVSTHxSZXNwb25zZXxQcm9taXNlPFJlc3BvbnNlPiA9ICcvZ3JhZF9hZmZfcGFhLndhc20nLCBvcHRpb25zPzogQUZGT3B0aW9ucyk6IFByb21pc2U8QUZGPiB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0IHx8IGlucHV0IGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFVSTCkgaW5wdXQgPSBpbnB1dC50b1N0cmluZygpO1xuXG4gICAgICAgIGlucHV0ID0gZmV0Y2goaW5wdXQpO1xuICAgIH1cblxuICAgIGNvbnN0IGluaXRPYmogPSBuZXcgQUZGKGlucHV0LCBvcHRpb25zKTtcbiAgICBhd2FpdCBpbml0T2JqLnJlYWR5O1xuXG4gICAgcmV0dXJuIGluaXRPYmo7XG59XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCBpbml0IGZyb20gJ0AvdXRpbHMvYWZmJztcbmltcG9ydCB7IFBBQV9NSU1FX1RZUEUgfSBmcm9tICdAL3V0aWxzL2ZpbGUnO1xuLyoqXG4gKiBHZW5lcmF0ZSBhIHBhYSBmcm9tIGFuIEltYWdlRGF0YSBvYmplY3RcbiAqIEBwYXJhbSB7SW1hZ2VEYXRhfSBkYXRhIGltYWdlIGRhdGFcbiAqIEByZXR1cm5zIHtQcm9taXNlPEJsb2I+fSB0aGUgcGFhIGFzIGEgYmxvYlxuICovXG5mdW5jdGlvbiBjb252ZXJ0SW1hZ2VUb1BhYShkYXRhKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgYWZmID0geWllbGQgaW5pdCgpO1xuICAgICAgICBjb25zdCB1aW50OGFycmF5ID0gYWZmLmVuY29kZShkYXRhKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFt1aW50OGFycmF5LmJ1ZmZlcl0sIHsgdHlwZTogUEFBX01JTUVfVFlQRSB9KTtcbiAgICB9KTtcbn1cbmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZXZlbnQpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IGltYWdlRGF0ZSA9IGV2ZW50LmRhdGE7XG4gICAgbGV0IG1zZztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBibG9iID0geWllbGQgY29udmVydEltYWdlVG9QYWEoaW1hZ2VEYXRlKTtcbiAgICAgICAgbXNnID0geyB0eXBlOiAnZGF0YScsIGRhdGE6IGJsb2IgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBtc2cgPSB7IHR5cGU6ICdlcnJvcicsIGRhdGE6IGVyciB9O1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgIHBvc3RNZXNzYWdlKG1zZywgdGhpcyk7XG59KSk7XG4iLCIvKipcbiAqIFdoeSBkbyB3ZSBub3QganVzdCB1c2UgRmlsZT9cbiAqIFdlbGwuLi4gYmVjYXVzZSBvbGQgRWRnZSBpcyBzaGl0dHkgYWYgYW5kIGNhbid0IGhhbmRsZSB0aGUgRmlsZSBjb25zdHJ1Y3RvciAoc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80MzI0MTkyMilcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHcmFkUGFhRmlsZSB7XG4gICAgYmxvYjogQmxvYjtcbiAgICBuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBQQUFfTUlNRV9UWVBFID0gJ2ltYWdlL3ZuZC5wYWEnO1xuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIGZpbGUgaXMgc3VwcG9ydGVkXG4gKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZVxuICogQHJldHVybnMge2Jvb2xlYW59IEZpbGUgaXMgc3VwcG9ydGVkP1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdXBwb3J0ZWRGaWxlICh7IGJsb2IsIG5hbWUgfTogR3JhZFBhYUZpbGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFsnaW1hZ2UvcG5nJywgJ2ltYWdlL3N2Zyt4bWwnLCAnaW1hZ2UvanBlZycsIFBBQV9NSU1FX1RZUEVdLmluY2x1ZGVzKGJsb2IudHlwZSkgfHwgL1xcLnBhYSQvaS50ZXN0KG5hbWUpKTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiBmaWxlIGlzIHN1cHBvcnRlZFxuICogQHBhcmFtIHtGaWxlfSBmaWxlIEZpbGVcbiAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBmaWxlIGV4dGVuc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUV4dGVuc2lvbiAobmFtZTogc3RyaW5nKTogc3RyaW5nfHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZXh0OiB1bmRlZmluZWR8c3RyaW5nID0gbmFtZS5zcGxpdCgnLicpLnBvcCgpO1xuXG4gICAgcmV0dXJuIGV4dD8udG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBHZXQgZmlsZSdzIG5hbWUgd2l0aG91dCBleHRlbnNpb25cbiAqIEBwYXJhbSB7RmlsZX0gZmlsZSBGaWxlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBmaWxlIG5hbWUgd2l0aG91dCBleHRlbnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVOYW1lV2l0aG91dEV4dGVuc2lvbiAobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbmFtZS5zcGxpdCgnLicpLnNsaWNlKDAsIC0xKS5qb2luKCcuJyk7XG59XG5cbi8qKlxuICogRG93bmxvYWQgZ2l2ZW4gZmlsZVxuICogQHBhcmFtIHtGaWxlfSBmaWxlIEZpbGUgdG8gZG93bmxvYWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkIChmaWxlOiBHcmFkUGFhRmlsZSk6IHZvaWQge1xuICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5ibG9iKTtcblxuICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgbGluay5kb3dubG9hZCA9IGZpbGUubmFtZTtcbiAgICBsaW5rLmhyZWYgPSB1cmw7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICBsaW5rLmNsaWNrKCk7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcbiAgICBsaW5rLnJlbW92ZSgpO1xuXG4gICAgLy8gd2UgcmV2b2tlIHRoZSB1cmwgb25seSBhZnRlciBhIGRlbGF5IGJlY2F1c2Ugb2xkIEVkZ2UgY2FuJ3QgaGFuZGxlIGl0IG90aGVyd2lzZVxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IFVSTC5yZXZva2VPYmplY3RVUkwodXJsKSwgMjAwKTtcbn1cblxuLyoqXG4gKiBSZWFkcyBmaWxlIGFzIGEgYXJyYXkgYnVmZmVyXG4gKiBAcGFyYW0ge0ZpbGV9IGZpbGUgRmlsZSB0byByZWFkXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheUJ1ZmZlcj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkRmlsZSAoZmlsZTogQmxvYik6IFByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4gcmVzb2x2ZShyZWFkZXIucmVzdWx0IGFzIEFycmF5QnVmZmVyKTtcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=