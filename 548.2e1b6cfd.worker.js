(()=>{"use strict";var t={551:(t,e,n)=>{t.exports=n.p+"assets/grad_aff_paa.c6b504cf.wasm"}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.p="",(()=>{var t=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{A(r.next(t))}catch(t){o(t)}}function a(t){try{A(r.throw(t))}catch(t){o(t)}}function A(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}A((r=r.apply(t,e||[])).next())}))};class e extends Error{constructor(){super('AFF not ready yet. Remember awaiting the "aff.ready" promise, before accessing any methods or properties.'),this.name="AFFNotReadyError"}}const r=new Map([[0,"OK"],[-1,"Unknown Error"],[-2,"Read Error"],[-3,"Argument Error"],[-4,"Invalid State"],[-5,"IO Error"],[-6,"Compression Error"],[-7,"Invalid State"]]);class i extends Error{constructor(t){var e;super(`${null!==(e=r.get(t))&&void 0!==e?e:"Unknown Error Code"} (Code: ${t})`),this.name="AFFExceptionError"}}class o{constructor(e,n){this.instance=null,this.memory=new WebAssembly.Memory({initial:256,maximum:32768}),this.dataView=new DataView(this.memory.buffer),this.ready=function(e,n){return t(this,void 0,void 0,(function*(){if(void 0!==WebAssembly.instantiateStreaming){const{instance:t}=yield WebAssembly.instantiateStreaming(e,n);return t}const t=yield(yield e).arrayBuffer();return(yield WebAssembly.instantiate(t,n)).instance}))}(e,{env:{memory:this.memory,__sys_stat64:(t,e)=>(this.setErrNo(5),-1),emscripten_notify_memory_growth:t=>this.updateViews()},wasi_snapshot_preview1:{fd_read:(t,e,n,r)=>(this.setErrNo(5),-1),fd_close:t=>(this.setErrNo(5),-1),fd_seek:(t,e,n,r,i)=>(this.setErrNo(5),-1),fd_write:(t,e,n,r)=>(this.setErrNo(5),-1),environ_sizes_get:(t,e)=>(this.dataView.setInt32(t,0,!0),this.dataView.setInt32(e,0,!0),0),environ_get:(t,e)=>0,proc_exit:t=>{var e;null===(e=null==n?void 0:n.exit)||void 0===e||e.call(n,t)}}}).then((t=>{this.instance=t,this.updateViews()}))}get exports(){var t;return null===(t=this.instance)||void 0===t?void 0:t.exports}updateViews(){this.dataView=new DataView(this.memory.buffer)}malloc(t){if(null===this.exports)throw new e;const n=this.exports.malloc(t);if(0===n)throw new Error("Failed to allocate memory");return n}free(t){if(null===this.exports)throw new e;this.exports.free(t)}writeBufferToMemory(t){const e=this.malloc(t.byteLength),n=new Uint8Array(t);for(let t=0;t<n.length;t++)this.dataView.setUint8(e+t,n[t]);return e}getBytesFromMemory(t,e){return new Uint8Array(this.memory.buffer).slice(t,t+e)}setErrNo(t){if(null===this.exports)throw new e;this.dataView.setInt32(this.exports.__errno_location(),t)}getLastAFFException(){if(null===this.exports)throw new e;const t=this.exports.get_last_aff_exception();return new i(t)}encode(t){if(null===this.exports)throw new e;const n=this.malloc(4),r=this.writeBufferToMemory(t.data.buffer),i=this.exports.encode(t.width,t.height,r,n);if(0===i)throw this.getLastAFFException();const o=this.dataView.getUint32(n,!0),s=this.getBytesFromMemory(i,o);if(0===this.exports.free_encoded_data(i))throw this.getLastAFFException();return this.free(n),this.free(r),s}decode(t){if(null===this.exports)throw new e;const n=this.malloc(4),r=this.malloc(2),i=this.malloc(2),o=this.writeBufferToMemory(t.buffer),s=this.exports.decode(o,t.length,r,i,n);if(0===s)throw this.getLastAFFException();const a=this.dataView.getUint32(n,!0),A=this.dataView.getUint16(r,!0),c=this.dataView.getUint16(i,!0),f=this.getBytesFromMemory(s,a),h=new ImageData(new Uint8ClampedArray(f.buffer),A,c);return this.free(n),this.free(r),this.free(i),this.free(o),h}}function s(t){return e=this,n=void 0,i=function*(){const e=new Image;e.decoding="async",e.src=t;const n=new Promise(((t,n)=>{e.onload=()=>t(),e.onerror=()=>n(Error("Image loading error"))}));return e.decode&&(yield e.decode().catch((()=>null))),yield n,e},new((r=void 0)||(r=Promise))((function(t,o){function s(t){try{A(i.next(t))}catch(t){o(t)}}function a(t){try{A(i.throw(t))}catch(t){o(t)}}function A(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,a)}A((i=i.apply(e,n||[])).next())}));var e,n,r,i}var a=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{A(r.next(t))}catch(t){o(t)}}function a(t){try{A(r.throw(t))}catch(t){o(t)}}function A(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}A((r=r.apply(t,e||[])).next())}))};const A="image/vnd.paa",c=(a(void 0,void 0,void 0,(function*(){const t=[[A,"PAA"],["image/png","PNG"],["image/jpeg","JPEG"],["image/svg+xml","SVG"],["image/bmp","BMP"],["image/gif","GIF"],["image/x-icon","ICO"]],e=yield Promise.all([f(["image/webp","WebP"],"data:image/webp;base64,UklGRhYAAABXRUJQVlA4TAoAAAAvAAAAAEX/I/of"),f(["image/avif","AVIF"],"data:image/avif;base64,AAAAFGZ0eXBhdmlmAAAAAG1pZjEAAACgbWV0YQAAAAAAAAAOcGl0bQAAAAAAAQAAAB5pbG9jAAAAAEQAAAEAAQAAAAEAAAC8AAAAGwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAARWlwcnAAAAAoaXBjbwAAABRpc3BlAAAAAAAAAAQAAAAEAAAADGF2MUOBAAAAAAAAFWlwbWEAAAAAAAAAAQABAgECAAAAI21kYXQSAAoIP8R8hAQ0BUAyDWeeUy0JG+QAACANEkA="),f(["image/jxl","JPEG XL"],"data:image/jxl;base64,/woAELASCAgQADAASxLFgoUUlw17/v8f")]);for(const n of e)void 0!==n&&t.push(n);return new Map(t)})),["paa"]);function f(t,e){return a(this,void 0,void 0,(function*(){try{yield s(e)}catch(t){return}return t}))}new RegExp(`\\.(${c.join("|")})$`,"i");var h=n(551),d=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{A(r.next(t))}catch(t){o(t)}}function a(t){try{A(r.throw(t))}catch(t){o(t)}}function A(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}A((r=r.apply(t,e||[])).next())}))};const u=function(e="/grad_aff_paa.wasm",n){return t(this,void 0,void 0,(function*(){("string"==typeof e||e instanceof Request||e instanceof URL)&&(e instanceof URL&&(e=e.toString()),e=fetch(e));const t=new o(e,n);return yield t.ready,t}))}(h);addEventListener("message",(t=>d(void 0,void 0,void 0,(function*(){const e=t.data;let n;try{n={type:"data",data:yield function(t){return d(this,void 0,void 0,(function*(){const e=(yield u).encode(t);return new Blob([e.buffer],{type:A})}))}(e)}}catch(t){n=t instanceof Error?{type:"error",data:t.toString()}:{type:"error",data:t}}postMessage(n,this)}))))})()})();